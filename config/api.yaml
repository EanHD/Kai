# API Server Configuration

server:
  host: "127.0.0.1"  # Only localhost (tunnel handles external access)
  port: 9000
  workers: 4
  reload: false  # Set true for development
  
  # HTTPS/SSL Configuration (disabled - tunnel handles HTTPS)
  ssl:
    enabled: false  # Cloudflare/ngrok tunnel handles HTTPS
    certfile: "certs/cert.pem"  # Path to SSL certificate
    keyfile: "certs/key.pem"    # Path to SSL private key
    ca_certs: null  # Optional: Path to CA certificate bundle
    # For self-signed certs in development:
    # Generate with: openssl req -x509 -newkey rsa:4096 -nodes -out cert.pem -keyout key.pem -days 365

# Authentication settings
auth:
  enabled: false  # Set true for production
  allow_no_auth: true  # Allow requests without auth (dev mode)

# Model name mapping: client request â†’ backend provider
model_mapping:
  # Local models (Ollama)
  smollm-local:
    provider: ollama
    model: smollm2:1.7b
    description: "Ultra-fast local model for narration and simple queries"

  granite-local:
    provider: ollama
    model: granite4:micro-h
    description: "Fast local model for simple queries"
  
  # External models (OpenRouter)
  opus-4.1:
    provider: openrouter
    model: anthropic/claude-opus-4.1
    description: "Most capable model for complex reasoning"
  
  sonnet-4.5:
    provider: openrouter
    model: anthropic/claude-sonnet-4.5
    description: "Balanced performance and cost"
  
  grok-4-fast:
    provider: openrouter
    model: x-ai/grok-4-fast
    description: "SOTA cost-efficiency with 2M context window"

# Default model when none specified
default_model: smollm-local

# Response generation settings
response:
  max_tokens: 2048  # Maximum tokens for responses (increase for longer outputs)
  fast_path_max_tokens: 1024  # Max tokens for simple queries (fast path)

# CORS configuration
cors:
  enabled: true
  allow_origins:
    - "http://localhost"
    - "http://localhost:3000"
    - "http://127.0.0.1"
    - "http://127.0.0.1:3000"
    - "https://eanhd.github.io"
    - "*"
  allow_credentials: true
  allow_methods:
    - "*"
  allow_headers:
    - "*"

# Rate limiting
rate_limiting:
  enabled: false  # Enable in production
  default_limit: "60/minute"
  per_key_limit: "100/minute"

# Logging
logging:
  level: INFO
  log_requests: true
  log_responses: false  # Privacy: don't log response content
  log_errors: true
